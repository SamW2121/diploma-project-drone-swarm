<!DOCTYPE html>
<html>
<head>
    <style>
         html, body {
            height: 100%;
            margin: 0;
            background: linear-gradient(to bottom, #ff6699, #66ccff);
        }
        .button-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-bottom: 10px;
        }

        .arrow-btn {
            width: 100px;
            height: 50px;
            border: solid black;
            background-color: white;
            color: black;
            font-weight: bold;
            font-size: 16px;
            cursor: pointer;
        }

        .arrow-btn:hover {
            background-color: lightgrey;
        }

        .arrow-btn:active {
            background-color: darkgrey;
        }

        .arrow-btn.pressed {
            background-color: grey !important;
        }

        #start-stream-btn,
        #connect-btn {
            width: 150px;
            height: 40px;
            font-size: 16px;
            cursor: pointer;
        }

        .video-screen {
            position: relative;
            width: 100%;
            height: 300px;
            background-color: #f1f1f1;
            display: none;
        }

        .fullscreen-btn,
        .exit-fullscreen-btn,
        .close-btn {
            position: absolute;
            bottom: 10px;
            right: 10px;
            padding: 5px 10px;
            font-size: 14px;
            cursor: pointer;
        }

        .error-popup {
            position: fixed;
            top: 10px;
            right: 10px;
            padding: 10px;
            background-color: red;
            color: white;
            display: none;
        }
    </style>
</head>
<body>
    <h1>Drone Control</h1>

    <div class="button-grid">
        <button id="move-left-btn" class="arrow-btn">Move Left</button>
        <button id="move-forwards-btn" class="arrow-btn">Move Forwards</button>
        <button id="move-backwards-btn" class="arrow-btn">Move Backwards</button>
        <button id="move-right-btn" class="arrow-btn">Move Right</button>
    </div>

    <div class="button-grid">
        <button id="move-up-btn" class="arrow-btn">Move Up</button>
        <button id="rotate-left-btn" class="arrow-btn">Rotate Left</button>
        <button id="rotate-right-btn" class="arrow-btn">Rotate Right</button>
        <button id="move-down-btn" class="arrow-btn">Move Down</button>
    </div>

    <button id="start-stream-btn">Start Video Stream</button>
    <button id="connect-btn">Connect to Drone</button>

    <div class="video-screen" id="video-screen">
        <video id="video-player" width="100%" height="100%" controls autoplay></video>
        <button id="fullscreen-btn" class="fullscreen-btn">&#8597; Fullscreen</button>
        <button id="exit-fullscreen-btn" class="exit-fullscreen-btn">&#8597; Exit Fullscreen</button>
        <button id="close-btn" class="close-btn">&times; Close</button>
    </div>

    <div class="error-popup" id="error-popup" style="display: none;"></div>

    <script>
       // Button click event listeners
        document.getElementById("move-up-btn").addEventListener("click", function () {
            sendCommand("move-up");
        });

        document.getElementById("move-down-btn").addEventListener("click", function () {
            sendCommand("move-down");
        });

        document.getElementById("move-forwards-btn").addEventListener("click", function () {
            sendCommand("move-forwards");
            markButtonPressed("move-forwards-btn");
        });

        document.getElementById("move-backwards-btn").addEventListener("click", function () {
            sendCommand("move-backwards");
            markButtonPressed("move-backwards-btn");
        });

        document.getElementById("move-left-btn").addEventListener("click", function () {
            sendCommand("move-left");
            markButtonPressed("move-left-btn");
        });

        document.getElementById("move-right-btn").addEventListener("click", function () {
            sendCommand("move-right");
            markButtonPressed("move-right-btn");
        });

        document.getElementById("rotate-left-btn").addEventListener("click", function () {
            sendCommand("rotate-left");
        });

        document.getElementById("rotate-right-btn").addEventListener("click", function () {
            sendCommand("rotate-right");
        });

        document.getElementById("start-stream-btn").addEventListener("click", function () {
            startVideoStream();
        });

        document.getElementById("connect-btn").addEventListener("click", function () {
            connectToDrone();
        });

        // Keyboard event listener
        document.addEventListener("keydown", function (event) {
            switch (event.key.toLowerCase()) {
                case "w":
                    sendCommand("move-forwards");
                    markButtonPressed("move-forwards-btn");
                    break;
                case "s":
                    sendCommand("move-backwards");
                    markButtonPressed("move-backwards-btn");
                    break;
                case "a":
                    sendCommand("move-left");
                    markButtonPressed("move-left-btn");
                    break;
                case "d":
                    sendCommand("move-right");
                    markButtonPressed("move-right-btn");
                    break;
                case "e":
                    sendCommand("rotate-right");
                    markButtonPressed("rotate-right-btn");
                    break;
                case "q":
                    sendCommand("rotate-left");
                    markButtonPressed("rotate-left-btn");
                    break;
                case "r":
                    sendCommand("move-up");
                    markButtonPressed("move-up-btn");
                    break;
                case "f":
                    sendCommand("move-down");
                    markButtonPressed("move-down-btn");
                    break;
            }
        });

        document.addEventListener("keyup", function (event) {
            switch (event.key.toLowerCase()) {
                case "w":
                case "s":
                case "a":
                case "d":
                case "e":
                case "q":
                case "r":
                case "f":
                    sendCommand("stop");
                    markButtonReleased();
                    break;
            }
        });

        // Function to send command
        function sendCommand(command) {
            // Implement the logic to send the command to the drone
            // This is a placeholder function
            console.log("Sending command: " + command);
        }

        // Function to mark button as pressed
        function markButtonPressed(buttonId) {
            var button = document.getElementById(buttonId);
            button.classList.add("pressed");
        }

        // Function to mark button as released
        function markButtonReleased() {
            var buttons = document.getElementsByClassName("arrow-btn");
            for (var i = 0; i < buttons.length; i++) {
                buttons[i].classList.remove("pressed");
            }
        }

        // Function to start video stream
        function startVideoStream() {
            // Implement the logic to start the video stream
            // This is a placeholder function
            console.log("Starting video stream");
            document.getElementById("video-screen").style.display = "block";
        }

        // Function to connect to drone
        function connectToDrone() {
            // Implement the logic to connect to the drone
            // This is a placeholder function
            console.log("Connecting to drone");
        }
    </script>
</body>
</html>
